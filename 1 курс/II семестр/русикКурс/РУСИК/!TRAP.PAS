PROGRAM kurs_tr;
USES CRT,TrapInt;
VAR
  e:real;      { Точность }
  a,b:real;    { Границы отрезка }
  r,r2:real;   { Предыдущее и текущее приближенные значения интеграла }
  n:integer;   { Количество отрезков }
BEGIN
{ Ввод границ отрезков }
  ClrScr;
  Write('Введите границы интегрирования: ');
  ReadLn(a,b);
  Write('Введите точность: ');
  ReadLn(e);
  WriteLn;
{ Вычисляется интеграл по методу трапеций }
  n:=3;
  r:=trap(a,b,n);         { Начальное значение }
  repeat
    r2:=r;                { Запоминается предыдущее значение }
    n:=n+2;               { Увеличивается количество шагов }
    r:=trap(a,b,n);       { Рассчитывается новое значение }
  until (abs(r-r2)<e);{ Повторяется до достижения необходимой точности }
  { Вывод результатов }
  WriteLn('Резльтат по методу трапеций равен: ',r:4:4);
  WriteLn('для получения необходимой точности интервал был разбит на ');
  WriteLn(n,' отрезков');
  ReadKey;
END.
