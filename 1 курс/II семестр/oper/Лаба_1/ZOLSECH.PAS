program prim;
uses crt, ustp, VibFo, metodof, idvvod;
{*------Подключение модулей------*
UstP     - Установка параметров и типов, открытие файла для работы
VibFo,   - Вспомогательные процедуры (вывод списка функций на экран,
           вычисление значения функций и их производных) - для тестирования!
Metodof - Методы нахождения оптимума функции 1-переменной без ограничений
IDVvod   - Процедуры ввода исходных данных для методов оптимизации }

 type          { Объявление типа записи }
   punkt=record
   x,y:integer;
   s:string[50];
 end;
 const
   msg1='Для выбора пункта меню '+'используйте клавиши:'+chr(25)+Chr(24)+'<Enter>';
 var
   a,b,e:real;
   nom:integer;
   fil:text;
   z,f:string;
   mas:array[1..3] of punkt;
   i,nr,num:integer;
   ch:char;
 {$F+} {- обязательно подключать директиву!!! }

 procedure menu;

 procedure main;
 Begin
   textbackground(1);
   { Оператор окрашивающий фон экрана }
   textcolor(15);
   { Оператор окрашивающий текст }
   clrscr;
   writeln('             Нахождение оптимума по методу "золотого" сечения');
   {--Получение имени файла для ввода результатов--}
   GetInputName(fil);

   {--Ввод исходных данных--}
   VvodIsxD_GS(a,b,e,fil);

   {--Вычисление оптимума--}
   GoldSech(FO,nom,a,b,e,fil);

   close(fil);

   readkey;
 end;

 procedure print;     { вывод массива записей на экран }
 begin
    textbackground(1);
    { Оператор окрашивающий фон экрана }
    textcolor(15);
    { Оператор окрашивающий текст }
    clrscr;
    writeln('      Введите имя файла, который нужно просмотреть');
    readln(f);
    assign(fil,f);
    reset(fil);
    while not Eof(fil) do
       begin
          readln(fil,z);
          writeln(z);
       end;
    close(fil);
    readkey;
 end;

 begin
   clrscr;
   mas[1].y:=14; mas[1].s:='1) Метод "Золотое  сечение"';
   mas[2].y:=16; mas[2].s:='2) Результаты, записанные в файл ';
   mas[3].y:=18; mas[3].s:='3) Выход ';
   nr:=1;
   while true do
      begin
         textattr:=24;
         { Установка цвета }
         clrScr;
         for i:=1 to 3 do
            begin
               GoToXy(23,mas[i].y);
               { Переход в нужное место экрана }
               write(mas[i].s);
            end;
         writeln;
         Gotoxy(15,22);
         { Переход в нужное место экрана }
         textattr:=28;
         { Установка цвета }
         writeln(msg1);
         { Вывод сообщения на экран }
         textattr:=26;
         { Установка цвета }
         gotoxy(1,3);
         { Переход в нужное место экрана }
         begin
            write('********************************************************************************');
            write('<<<<<<<<<<<<<<<<<<<<<<<<<<<< ');
            textattr:=28;
            write('Лабораторная работа № 1 ');
            textattr:=26;
            write('>>>>>>>>>>>>>>>>>>>>>>>>>>>');
            write('::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::');
            write('!!!!!!!!!!!!!!!!!!!!');
            textattr:=28;
            write('Выполнил студент группы 02КП1 Ростягайло Андрей');
            textattr:=26;
            write('!!!!!!!!!!!!!');
            Write('################################################################################');
            Write(' ');
            textattr:=28;
            write('ТЕМА: Метод "Золотого Сечения" ');
            textattr:=26;
            write('');
            Write('');
            Writeln;
         end;
         textattr:=27;
         { Установка цвета }
         gotoxy(23,mas[nr].y);
         { Переход в нужное место экрана }
         write(mas[nr].s);
         ch:=readkey;
         { Ожидание нажатия клавиши }
         case ch of
         { Анализ введеного символа }
            #13:begin { ENTER }
                case nr of
                { Анализ выбронного пункта }
                  1:main;  { Процедура проверки метода }
                  2:print;  { Процедура чтения записи из файла }
                  3:Halt;  { Процедура выхода из программы }
               end;
               end;
            #0:begin  { Упровляющий символ }
               ch:=readkey;
               { Ожидание нажатия клавиши }
               case ch of
               { Анализ введеного символа }
                  #80:if nr<3 then nr:=nr+1 { Стрелка вверх }
                  else
                    nr:=1;
                  #72:if nr>1 then nr:=nr-1 { Стрелка вниз }
                  else
                    nr:=3;
               end;
            end;
         end;
      end;
   end;


{--------------------------------------------------------------------------------
                          Основное тело программы
------------------------------------------------------------------------------}
 begin
    textbackground(1);
    { Оператор окрашивающий фон экрана }
    textcolor(15);
    { Оператор окрашивающий текст }
    clrscr;
    menu;
    { Вызов процедуры }
 end.
